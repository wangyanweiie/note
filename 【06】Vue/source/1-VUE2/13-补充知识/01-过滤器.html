<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>过滤器</title>
  <script type="text/javascript" src="../Js/vue.js"></script>
  <script type="text/javascript" src="../Js/dayjs.min.js"></script>
</head>
<body>
<!-- 过滤器(vue3废除) -->
<!---------------------------------------------------------------
1.定义：对要显示的数据进行特定格式化后再显示(适用于一些简单逻辑的处理)
2.语法：
（1）注册过滤器：Vue.filter(name,callback) 或 new Vue{filters:{}}
（2）使用过滤器：{{ xxx | 过滤器名}} 或 v-bind:属性名 = "xxx | 过滤器名"
3.注意：
（1）过滤器第一个参数就是需要过滤的对象,即过滤器管道符前面的数据;
（2）过滤器也可以接收额外参数,多个过滤器也可以串联;
（3）并没有改变原本的数据,是返回新的对应的数据替换掉整个显示;
（4）分类
    * 全局过滤器
    * 局部过滤器: 只有在当前注册的vue实例可以使用
------------------------------------------------->
  <div id="app">
    <h3>显示格式化后的时间</h3> 
    <h4>现在是：{{formatTime}}</h4>             <!-- 计算属性实现 -->
    <h4>现在是：{{getFormatTime()}}</h4>        <!-- methods实现 -->
    <h4>现在是：{{time | timeFormater}}</h4>    <!-- 过滤器实现 -->
    <h4>现在是：{{time | timeFormater('YYYY-MM-DD')}}</h4>            <!-- 过滤器传参 -->
    <h4>现在是：{{time | timeFormater('YYYY-MM-DD') | mySlice}}</h4>  <!-- 过滤器串联使用 -->
    <!-- ?? -->
    <h3 :x="message | mySlice"></h3>
  </div>
  <div id="root">
    <h3>{{message | mySlice}}</h3>
  </div>
</body>

<script type="text/javascript">
  Vue.config.productionTip = false  //关闭生产提示
  //**************全局过滤器**************
  Vue.filter('mySlice',function(value){
    return value.slice(0,4)
  })

  //声明vue实例
  new Vue({
    el:'#app',
    data:{
      time:1621561377603,   //时间戳
      message:'HelloWord'
    },
    computed: {
      formatTime(){   
        //dayjs()默认参数为当前代码执行时的时间戳
        return dayjs(this.time).format('YYYY年MM月DD日 HH:mm:ss')
      }
    },
    methods: {
      getFormatTime(){
        return dayjs(this.time).format('YYYY年MM月DD日 HH:mm:ss')
      }
    },
    //********************局部过滤器********************
    filters:{  //ES6语法: str可以设置默认值
      timeFormater(value,str='YYYY年MM月DD日 HH:mm:ss'){
        return dayjs(value).format(str)
      }
    }
  })

  //声明vue实例
  new Vue({
    el:'#root',
    data:{
      message:'HelloWorld'
    }
  })
</script>
</html>