<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>执行上下文栈</title>
</head>
<body>
<!----------------------------------------------------------------
执行上下文栈
（1）流程
  * 在全局代码执行前, JS引擎会创建一个栈来存储管理所有的执行上下文对象;
  * 在全局执行上下文(window)确定后, 将其添加到栈中(压栈);
  * 在函数执行上下文创建后, 将其添加到栈中(压栈);
  * 在当前函数执行完后,将栈顶的对象移除(出栈);
  * 当所有的代码执行完后, 栈中只剩下 window;

（2）注意
  * 栈的规则：后进先出;
  * 全局执行上下文只有一个(window), 其余的都是函数执行上下文;
  * 全局执行上下文永远在栈底, 因为第一个产生的是 window;
  * 当前执行的永远都是在栈顶的执行上下文对象;
------------------------------------------------------------------>
<script type="text/javascript">
  //********整个过程中产生了几个执行上下文？1+2=3 ********
  /*var a = 10;
    var bar = function(x){
      var b = 5;
      foo(x + b);
    };
    var foo = function(y){
      var c = 5;
      console.log(a + c + y)
    };
    bar(10);*/

  //********整个过程中产生了几个执行上下文？1+4=5 ********
  console.log('gb:'+ i);
  var i = 1;
  foo(1);
  function foo(i){
    if (i == 4){
      return
    }
    console.log('fb:' + i);
    //递归调用
    foo(i+1); 
    console.log('fe:' + i);
  };
  console.log('ge:' + i);

  /*依次输出结果是什么？
    gb: undefined
    fb: 1   //压栈
    fb: 2
    fb: 3
    fe: 3   //出栈
    fe: 2
    fe: 1
    ge: 1
  */
</script>
</body>
</html>